{% comment %}
This is the main component for the PO list.
It renders the table structure and includes the initial rows and modals.
{% endcomment %}
{% load humanize %}
{% load custom_filters %}

{# 1. The Table Structure #}
<div class="bg-base-100 shadow-lg rounded-lg overflow-x-auto">
    <table class="table w-full">
        <thead>
            <tr>
                <th>PO id</th>
                <th>Supplier</th>
                <th>ETA</th>
                <th class="text-right">Total (USD)</th>
                <th>Status</th>
                <th>Last Updated</th>
                <th>Items</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if purchase_orders %}
                {# Include the initial set of table rows #}
                {% include "warehouse/_po_table_rows_only.html" with purchase_orders=purchase_orders %}
            {% else %}
                <tr>
                    <td colspan="8" class="text-center py-8 text-gray-500">
                        No purchase orders found matching your criteria.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

{# 2. The "Load More" Button (if applicable) #}
{% if page_obj.has_next %}
<div class="text-center mt-4 load-more-button-container">
    <button id="explore-more-pos-btn" class="btn btn-outline" data-next-page="{{ page_obj.next_page_number }}">
        Explore More
    </button>
</div>
{% endif %}


{# 3. THIS IS THE FIX: Include the modals for the initial set of POs #}
{% if purchase_orders %}
    {% include "warehouse/_po_modals_only.html" with purchase_orders=purchase_orders status_choices=status_choices status_dates=status_dates %}
{% endif %}
