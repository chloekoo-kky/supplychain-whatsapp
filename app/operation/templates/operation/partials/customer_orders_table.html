{% comment %} app/operation/templates/operation/partials/customer_orders_table.html {% endcomment %}
{% load i18n %}
{% load humanize %}

{# Sticky Filter Panel for Customer Orders - Changed items-center to items-start for top alignment #}
<div class="operations-filter-panel md:w-full shrink-0 sticky top-24 h-fit bg-base-200 shadow px-4 py-2 rounded-lg z-20 mb-4">

    <div class="grid grid-cols-12 gap-x-6 items-start">
        <div class="col-span-12 md:col-span-2">
            <h2 class="text-lg font-semibold text-gray-700">
                Total:
                <br><span class="font-normal text-gray-500 customer-order-count">
                    {% if orders.paginator %}({{ orders.paginator.count }} orders)
                    {% else %}({{ total_orders_count|default:0 }} orders){% endif %}
                </span>
            </h2>
        </div>

        <div class="col-span-12 md:col-span-3">
            <div class="flex flex-wrap gap-1 justify-end">
                {% if request.user.is_superuser %}
                    <button type="button" class="btn btn-sm sm:btn-sm warehouse-filter-btn btn-outline" data-value="">All WH</button>
                    {% for wh in warehouses %}
                    <button type="button" class="btn btn-sm sm:btn-sm warehouse-filter-btn btn-outline" data-value="{{ wh.pk }}">
                        {{ wh.name }}
                    </button>
                    {% endfor %}
                {% else %}
                    {% if request.user.warehouse %}
                    <button type="button" class="btn btn-sm md:btn-sm btn-neutral text-white">
                        {{ request.user.warehouse.name }}
                    </button>
                    {% else %}
                    <button type="button" class="btn btn-xs sm:btn-sm btn-error text-white" disabled>
                        No WH Assigned
                    </button>
                    {% endif %}
                {% endif %}
            </div>
        </div>

        <div class="col-span-12 md:col-span-5">
            <div class="flex flex-col gap-2">
                <div class="flex flex-wrap gap-1">
                    <button type="button" class="btn btn-sm status-filter-btn btn-outline" data-value="">All</button>
                    {% for code, display_name in status_choices %}
                    <button type="button" class="btn btn-sm status-filter-btn btn-outline" data-value="{{ code }}">{{ display_name }}</button>
                    {% endfor %}
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" name="q" value="{{ query|default:'' }}" placeholder="Search Orders..."
                        class="input input-bordered input-sm w-full dynamic-search-input">
                    <button type="button" class="btn btn-sm btn-outline bg-gray-300 reset-filters-btn">Reset</button>
                </div>
            </div>
        </div>

        <div class="col-span-12 md:col-span-2 flex items-center justify-end">
             <label for="import-orders-modal-toggle" class="btn btn-sm md:btn-md btn-primary">Import Orders</label>
        </div>
    </div>
</div>

{# This container's content will be replaced by AJAX #}
<div id="customer-orders-dynamic-content">
    {% include 'operation/partials/_customer_orders_table_with_pagination.html' with orders=orders %}
</div>
