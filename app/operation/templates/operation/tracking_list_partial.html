<div class="max-w-5xl mx-auto p-6">
    <h2 class="text-2xl font-bold mb-6">ðŸ“‹ All Purchase Orders</h2>
    <form method="get" class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4 bg-base-100 p-4 rounded shadow">
      <div>
        <label class="label">Supplier</label>
        <select name="supplier" class="select select-bordered w-full">
          <option value="">All</option>
          {% for supplier in suppliers %}
            <option value="{{ supplier.id }}" {% if supplier.id|stringformat:"s" == selected_supplier %}selected{% endif %}>
              {{ supplier.name }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="label">Status</label>
        <select name="status" class="select select-bordered w-full">
          <option value="">All</option>
          {% for code, label in purchase_orders.first.STATUS_CHOICES %}
            <option value="{{ code }}" {% if code == selected_status %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="label">Date From</label>
        <input type="date" name="date_from" class="input input-bordered w-full" value="{{ date_from }}">
      </div>
      <div>
        <label class="label">Date To</label>
        <input type="date" name="date_to" class="input input-bordered w-full" value="{{ date_to }}">
      </div>
      <div class="md:col-span-4 text-right">
        <button type="submit" class="btn btn-primary">Filter</button>
      </div>
    </form>

    {% if purchase_orders %}
      {% for po in purchase_orders %}
        <div class="mb-6 bg-base-100 shadow rounded-xl p-4">
          <div class="flex justify-between items-center">
            <div>
              <h3 class="text-lg font-semibold">PO #{{ po.id }} - {{ po.supplier.name }}</h3>
              <p class="text-sm text-gray-500">
                Status:
                <span class="font-medium">
                  {% if po.status == "DELIVERED" %}
                    <span class="badge badge-success">Delivered</span>
                  {% elif po.status == "PAYMENT_MADE" %}
                    <span class="badge badge-info">Payment Made</span>
                  {% elif po.status == "WAITING_INVOICE" %}
                    <span class="badge badge-warning">Waiting Invoice</span>
                  {% else %}
                    <span class="badge badge-neutral">Pending</span>
                  {% endif %}
                </span> |
                Date: {{ po.order_date }}</p>
            </div>
            <a href="{% url 'inventory:po_detail' po.pk %}" class="btn btn-sm btn-outline">View Details</a>
          </div>

          <div class="mt-4">
            <table class="table w-full">
              <thead>
                <tr>
                  <th>Item</th>
                  <th>Qty</th>
                  <th>Unit Price</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                {% for item in po.items.all %}
                <tr>
                  <td>{{ item.item.name }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>{{ item.price }}</td>
                  <td>{{ item.total_price }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            <div class="text-right font-bold mt-2">Total Amount: {{ po.total_amount }}</div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No purchase orders found.</p>
    {% endif %}
  </div>

